<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Vue Test</title>

    <!-- This is a development version of Vue.js! -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/algoliasearch@4.14.3/dist/algoliasearch-lite.umd.js"
      integrity="sha256-dyJcbGuYfdzNfifkHxYVd/rzeR6SLLcDFYEidcybldM="
      crossorigin="anonymous"
    ></script>

    <!-- For Vue 2: -->
    <script
      src="https://cdn.jsdelivr.net/npm/vue-instantsearch@4.8.5/vue2/umd/index.js"
      integrity="sha256-piDGip8zOS04Sb8ea8q3UAtZxVG0s66Gg3+YV2Tp2q4="
      crossorigin="anonymous"
    ></script>


    <!-- Google fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans"
      rel="stylesheet"
    />
    <!-- Bootstrap v5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <div id="app" v-bind:title="timestamp" class="experiment-block">
      <ais-instant-search
        index-name="Product"
        v-bind:search-client="searchClient"
      >
        <ais-configure
          :attributes-to-snippet.camel="['description:10']"
          :snippet-ellipsis-text.camel="'…'"
          :remove-words-if-no-result.camel="'allOptional'"
        />
        <header class="p-5">
          <ais-search-box
            submit-title="Submit the query"
            :autofocus="true"
            :class-names="{
                'ais-SearchBox-submit': 'btn btn-primary',
                'ais-SearchBox-input': 'form-control inline-block',
                'ais-SearchBox-form': 'd-flex gap-3 w-50 mx-auto',
                'ais-SearchBox-reset': 'btn btn-danger'
            }"
          >
            <template #submit-icon>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 18 18"
                width="16"
                height="16"
              >
                <g
                  fill="none"
                  fill-rule="evenodd"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.67"
                  transform="translate(1 1)"
                >
                  <circle cx="7.11" cy="7.11" r="7.11" />
                  <path d="M16 16l-3.87-3.87" />
                </g>
              </svg>
            </template>
          </ais-search-box>
        </header>
        <main>
          <ais-hits
            :class-names="{

           }"
            :transform-items="transformItems"
          >
          <template v-slot="{ items, sendEvent }">
            <div class="container py-5">
                <div v-for="item in items" :key="item.objectID" class="row justify-content-center mb-3">
                  <div class="col-md-12 col-xl-10">
                    <div class="card shadow-0 border rounded-3">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-md-12 col-lg-3 col-xl-3 mb-4 mb-lg-0">
                            <div class="bg-image hover-zoom ripple rounded ripple-surface">
                              <img :src="item.image !== '' ? 'https://emmano.pl/media/'+item.image : 'https://dummyimage.com/640x360/fff/aaa'"
                                class="w-100" />
                              <a href="#!">
                                <div class="hover-overlay">
                                  <div class="mask" style="background-color: rgba(253, 253, 253, 0.15);"></div>
                                </div>
                              </a>
                            </div>
                          </div>
                          <div class="col-md-6 col-lg-6 col-xl-6">
                            <h5>{{ item.name }}</h5>
                            <div class="d-flex flex-row">
                              <div class="text-danger mb-1 me-2">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                              </div>
                              <span>310</span>
                            </div>
                            <div class="mt-1 mb-0 text-muted small">
                              <span>100% cotton</span>
                              <span class="text-primary"> • </span>
                              <span>Light weight</span>
                              <span class="text-primary"> • </span>
                              <span>Best finish<br /></span>
                            </div>
                            <div class="mb-2 text-muted small">
                              <span>Unique design</span>
                              <span class="text-primary"> • </span>
                              <span>For men</span>
                              <span class="text-primary"> • </span>
                              <span>Casual<br /></span>
                            </div>
                            <p class="text-truncate mb-4 mb-md-0">{{ item.short_description ? item.short_description : 'lorem ipsum sit dolor amet sit aba lse. joh lske. asdf jkelo jiul jijlalj.'}}</p>
                          </div>
                          <div class="col-md-6 col-lg-3 col-xl-3 border-sm-start-none border-start">
                            <div class="d-flex flex-row align-items-center mb-1">
                              <h4 class="mb-1 me-1">$13.99</h4>
                              <span class="text-danger"><s>$20.99</s></span>
                            </div>
                            <h6 class="text-success">Free shipping</h6>
                            <div class="d-flex flex-column mt-4">
                              <button class="btn btn-primary btn-sm" type="button">Details</button>
                              <button class="btn btn-outline-primary btn-sm mt-2" type="button">
                                Add to wishlist
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            <!-- <ul>
              <li v-for="item in items" :key="item.objectID">
                <h1>{{ item.name }}</h1>
                <button
                  type="button"
                  @click="sendEvent('click', item, 'Item Added')"
                >
                  Add to cart
                </button>
              </li>
            </ul> -->
          </template>
          </ais-hits>
        </main>
      </ais-instant-search>
    </div>

    <script type="module">
      const app = new Vue({
        el: "#app",
        data: {
          message: "🐵 Hello World 🔮",
          timestamp: `Timestamp ${new Date().toLocaleString()}`,
          searchClient: algoliasearch(
            "1LSUQ7GW58",
            "386f5ab5b40107abc10ff3863afa7e90"
          ),
        },
        methods: {
          transformItems(items, { results }) {
            return items.map((item, index) => ({
              ...item,
              position: { index, page: results.page },
            }));
          },
        },
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
